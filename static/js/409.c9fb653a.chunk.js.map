{"version":3,"file":"static/js/409.c9fb653a.chunk.js","mappings":"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","sources":["Components/ToggleButton/WeaponToggle.tsx","Components/Weapon/WeaponSelectionModal.tsx"],"sourcesContent":["import { ToggleButton } from \"@mui/material\";\nimport Assets from \"../../Assets/Assets\";\nimport { allWeaponTypeKeys, WeaponTypeKey } from \"../../Types/consts\";\nimport { handleMultiSelect } from \"../../Util/MultiSelect\";\nimport ImgIcon from \"../Image/ImgIcon\";\nimport SolidToggleButtonGroup, { SolidToggleButtonGroupProps } from \"../SolidToggleButtonGroup\";\ntype WeaponToggleProps = Omit<SolidToggleButtonGroupProps, \"onChange\" | \"value\"> & {\n  onChange: (value: WeaponTypeKey[]) => void\n  value: WeaponTypeKey[]\n}\nconst weaponTypeHandler = handleMultiSelect([...allWeaponTypeKeys])\nexport default function WeaponToggle({ value, onChange, ...props }: WeaponToggleProps) {\n  return <SolidToggleButtonGroup exclusive value={value} {...props}>\n    {allWeaponTypeKeys.map(wt => <ToggleButton key={wt} value={wt} onClick={() => onChange(weaponTypeHandler(value, wt))}>\n      <ImgIcon src={Assets.weaponTypes?.[wt]} size={2} />\n    </ToggleButton>)}\n  </SolidToggleButtonGroup>\n}\n","import { Box, CardActionArea, CardContent, Divider, Grid, TextField, ToggleButton, Typography } from \"@mui/material\"\nimport { ChangeEvent, useContext, useDeferredValue, useEffect, useState } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport Assets from \"../../Assets/Assets\"\nimport WeaponSheet from \"../../Data/Weapons/WeaponSheet\"\nimport { DatabaseContext } from \"../../Database/Database\"\nimport usePromise from \"../../ReactHooks/usePromise\"\nimport { allRarities, allWeaponKeys, allWeaponTypeKeys, WeaponKey, WeaponTypeKey } from \"../../Types/consts\"\nimport { handleMultiSelect } from \"../../Util/MultiSelect\"\nimport CardDark from \"../Card/CardDark\"\nimport CardLight from \"../Card/CardLight\"\nimport CloseButton from \"../CloseButton\"\nimport ImgIcon from \"../Image/ImgIcon\"\nimport ModalWrapper from \"../ModalWrapper\"\nimport SolidToggleButtonGroup from \"../SolidToggleButtonGroup\"\nimport { StarsDisplay } from \"../StarDisplay\"\nimport WeaponToggle from \"../ToggleButton/WeaponToggle\"\n\ntype WeaponSelectionModalProps = {\n  show: boolean,\n  ascension?: number,\n  onHide: () => void,\n  onSelect: (wKey: WeaponKey) => void,\n  filter?: (sheet: WeaponSheet) => boolean,\n  weaponTypeFilter?: WeaponTypeKey,\n}\n\nconst rarityHandler = handleMultiSelect([...allRarities])\nexport default function WeaponSelectionModal({ show, ascension = 0, onHide, onSelect, filter = () => true, weaponTypeFilter }: WeaponSelectionModalProps) {\n  const { t } = useTranslation([\"page_weapon\", \"weaponNames_gen\"])\n  const weaponSheets = usePromise(() => WeaponSheet.getAll, [])\n  const [weaponFilter, setWeaponfilter] = useState<WeaponTypeKey[]>(weaponTypeFilter ? [weaponTypeFilter] : [...allWeaponTypeKeys])\n\n  const { database } = useContext(DatabaseContext)\n  const [state, setState] = useState(database.displayWeapon.get())\n  useEffect(() => database.displayWeapon.follow((r, dbMeta) => setState(dbMeta)), [database])\n\n  useEffect(() => weaponTypeFilter && setWeaponfilter([weaponTypeFilter]), [weaponTypeFilter])\n\n  const [searchTerm, setSearchTerm] = useState(\"\")\n  const deferredSearchTerm = useDeferredValue(searchTerm)\n\n  const { rarity } = state\n  const weaponIdList = !weaponSheets ? [] : allWeaponKeys.filter(wKey => filter(weaponSheets(wKey)))\n    .filter(wKey => weaponFilter.includes(weaponSheets(wKey).weaponType))\n    .filter(wKey => !deferredSearchTerm || t(`weaponNames_gen:${wKey}`).toLowerCase().includes(deferredSearchTerm.toLowerCase()))\n    .filter(wKey => rarity.includes(weaponSheets(wKey).rarity))\n    .sort((a, b) => weaponSheets(b).rarity - weaponSheets(a).rarity)\n\n  if (!weaponSheets) return null\n\n  return <ModalWrapper open={show} onClose={onHide}>\n    <CardDark>\n      <CardContent sx={{ py: 1 }}>\n        <Grid container spacing={1}>\n          <Grid item>\n            <WeaponToggle value={weaponFilter} onChange={setWeaponfilter} disabled={!!weaponTypeFilter} size=\"small\" />\n          </Grid >\n          <Grid item>\n            <SolidToggleButtonGroup sx={{ height: \"100%\" }} value={rarity} size=\"small\">\n              {allRarities.map(star => <ToggleButton key={star} value={star} onClick={() => database.displayWeapon.set({ rarity: rarityHandler(rarity, star) })}><Box display=\"flex\" gap={1}><strong>{star}</strong><StarsDisplay stars={1} /></Box></ToggleButton>)}\n            </SolidToggleButtonGroup>\n          </Grid>\n          <Grid item flexGrow={1}>\n            <TextField\n              autoFocus\n              size=\"small\"\n              value={searchTerm}\n              onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setSearchTerm(e.target.value)}\n              label={t(\"weaponName\")}\n              sx={{ height: \"100%\" }}\n              InputProps={{\n                sx: { height: \"100%\" }\n              }}\n            />\n          </Grid>\n          <Grid item>\n            <CloseButton onClick={onHide} />\n          </Grid >\n        </Grid>\n      </CardContent>\n      <Divider />\n      <CardContent><Grid container spacing={1}>\n        {weaponIdList.map(weaponKey => {\n          const weaponSheet = weaponSheets(weaponKey)\n          return <Grid item key={weaponKey} lg={3} md={4}>\n            <CardLight sx={{ height: \"100%\" }} >\n              <CardActionArea onClick={() => { onHide(); onSelect(weaponKey) }} sx={{ display: \"flex\" }}>\n                <Box component=\"img\" src={weaponSheet.getImg(ascension)} sx={{ width: 100, height: \"auto\" }} className={` grad-${weaponSheet.rarity}star`} />\n                <Box sx={{ flexGrow: 1, px: 1 }}>\n                  <Typography variant=\"subtitle1\">{weaponSheet.name}</Typography>\n                  <Typography><ImgIcon src={Assets.weaponTypes?.[weaponSheet.weaponType]} /> <StarsDisplay stars={weaponSheet.rarity} colored /></Typography>\n                </Box>\n              </CardActionArea>\n            </CardLight>\n          </Grid>\n        })}\n      </Grid></CardContent>\n      <Divider />\n      <CardContent sx={{ py: 1 }}>\n        <CloseButton large onClick={onHide} />\n      </CardContent>\n    </CardDark>\n  </ModalWrapper>\n}\n"],"names":["weaponTypeHandler","handleMultiSelect","allWeaponTypeKeys","WeaponToggle","value","onChange","props","exclusive","wt","onClick","src","Assets","size","rarityHandler","allRarities","WeaponSelectionModal","show","ascension","onHide","onSelect","filter","weaponTypeFilter","t","useTranslation","weaponSheets","usePromise","WeaponSheet","useState","weaponFilter","setWeaponfilter","database","useContext","DatabaseContext","displayWeapon","get","state","setState","useEffect","follow","r","dbMeta","searchTerm","setSearchTerm","deferredSearchTerm","useDeferredValue","rarity","weaponIdList","allWeaponKeys","wKey","includes","weaponType","toLowerCase","sort","a","b","open","onClose","sx","py","container","spacing","item","disabled","height","star","set","display","gap","stars","flexGrow","autoFocus","e","target","label","InputProps","map","weaponKey","weaponSheet","lg","md","component","getImg","width","className","px","variant","name","colored","large"],"sourceRoot":""}